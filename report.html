<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report</title>
    <script src="https://unpkg.com/htmx.org@1.9.1"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function disconnectAgent(user) {
            fetch('/disable-users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user })
            }).then(response => {
                if (response.ok) {
                    alert('Utilisateur désactivé avec succès');
                    location.reload();
                } else {
                    alert('Erreur lors de la désactivation');
                }
            });
        }
    </script>
</head>
<body class="bg-gray-100 p-6">

<div class="container mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-semibold mb-4">Agent Report</h1>

    <!-- Table that will be updated every 10 seconds with HTMX -->
    <div >
        <!-- HTMX will replace the content of this div with the response from the server -->
        <table class="min-w-full table-auto border-collapse border border-gray-200" hx-get="/report-table" hx-trigger="every 10s" hx-target="#agent-table" hx-swapp="innerHTML">
            <thead>
                <tr>
                    <th class="px-4 py-2 border border-gray-300">Utilisateur</th>
                    <th class="px-4 py-2 border border-gray-300">IP du serveur</th>
                    <th class="px-4 py-2 border border-gray-300">Status</th>
                    <th class="px-4 py-2 border border-gray-300">MM:SS</th>
                    <th class="px-4 py-2 border border-gray-300"> ID du campagne</th>
                    <th class="px-4 py-2 border border-gray-300">Appelles du jour</th>
                    <th class="px-4 py-2 border border-gray-300">Action</th>
                </tr>
            </thead>
            <tbody id="agent-table">
                
                <!-- Data will be populated here dynamically -->
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
